import{N as u}from"./index-C-I6vmrZ.js";import{r as k,R as E}from"./index-CBqU2yxZ.js";const{global:O}=__STORYBOOK_MODULE_GLOBAL__,{makeDecorator:L,addons:p}=__STORYBOOK_MODULE_PREVIEW_API__,{STORY_CHANGED:T,SELECT_STORY:y}=__STORYBOOK_MODULE_CORE_EVENTS__;var C="links",{document:c,HTMLElement:R}=O;function v(t){let e={},i=(t[0]==="?"?t.substring(1):t).split("&").filter(Boolean);for(let n=0;n<i.length;n++){let a=i[n].split("=");e[decodeURIComponent(a[0])]=decodeURIComponent(a[1]||"")}return e}var h=t=>p.getChannel().emit(y,t),D=(t,e)=>new Promise(i=>{let{location:n}=c,a=v(n.search).id,s=t||a.split("--",2)[0],o=`/story/${u(s,e)}`,l=n.pathname.replace(/iframe\.html$/,""),f=`${n.origin+l}?${Object.entries({path:o}).map(d=>`${d[0]}=${d[1]}`).join("&")}`;i(f)}),m=t=>{let{target:e}=t;if(!(e instanceof R))return;let i=e,{sbKind:n,sbStory:a}=i.dataset;(n||a)&&(t.preventDefault(),h({kind:n,story:a}))},r=!1,K=()=>{r||(r=!0,c.addEventListener("click",m))},g=()=>{r&&(r=!1,c.removeEventListener("click",m))};L({name:"withLinks",parameterName:C,wrapper:(t,e)=>(K(),p.getChannel().once(T,g),t(e))});var b=0,S=t=>t.button===b&&!t.altKey&&!t.ctrlKey&&!t.metaKey&&!t.shiftKey,U=(t,e=i=>{})=>{S(t)&&(t.preventDefault(),e(t))},_=class extends k.PureComponent{constructor(){super(...arguments),this.state={href:"/"},this.updateHref=async()=>{let{kind:t,title:e=t,story:i,name:n=i}=this.props;if(e&&n){let a=await D(e,n);this.setState({href:a})}},this.handleClick=()=>{let{kind:t,title:e=t,story:i,name:n=i}=this.props;e&&n&&h({title:e,name:n})}}componentDidMount(){this.updateHref()}componentDidUpdate(t){let{kind:e,title:i,story:n,name:a}=this.props;(t.kind!==e||t.story!==n||t.title!==i||t.name!==a)&&this.updateHref()}render(){let{kind:t,title:e=t,story:i,name:n=i,children:a,...s}=this.props,{href:o}=this.state;return E.createElement("a",{href:o,onClick:l=>U(l,this.handleClick),...s},a)}};_.defaultProps={children:void 0};var Y=_;export{Y as r};
